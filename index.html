<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cours dev</title>
    <script src="app.js" type="module" defer></script>
    <link rel="stylesheet" type="text/css" href="style/css/style.css" />
</head>
<body>
<div class="modal" id="js-modal">
    <h3>RÃ©pertoire comp</h3>
    <div class="modal-content">
        <form id="login-form">
            <input type="text" id="username" name="username" required placeholder="Nom d'utilisateur"><br><br>
            <input type="password" id="password" name="password" required placeholder="Mot de passe"><br><br>
            <button type="submit" id="submitLogin">Se connecter</button>
        </form>
        <p id="error-message"></p>
    </div>
</div>

<nav>
    <button id="jsButton" class="button-lang"  data-lang="js">
        <img src="picture/js-picture.png" alt="">
    </button>
    <button id="sqlButton" class="button-lang"  data-lang="sql">
        <img src="picture/sql-picture.jpg" alt="">
    </button>
    <button id="cButton" class="button-lang"  data-lang="c">
        <img src="picture/c-picture.png" alt="">
    </button>
    <button id="phpButton" class="button-lang"  data-lang="php">
        <img src="picture/php-picture.jpg" alt="">
    </button>
    <button id="typescriptButton" class="button-lang"  data-lang="typescript">
        <img src="picture/typescript.png" alt="">
    </button>
    <button id="scssButton" class="button-lang"  data-lang="scss">
        <img src="picture/scss-picture.png" alt="">
    </button>
    <button id="angularButton" class="button-lang"  data-lang="angular">
        <img src="picture/angular-picture.png" alt="">
    </button>
</nav>


<div class="content">
    <aside id="lateralNav" class="lateral-barre">
    </aside>
    <article>
        <h1></h1>
        <p class="general-panel"></p>
        <template id="accordeonTemplate">
            <button class="accordion"></button>
            <div class="panel"></div>
        </template>
        <template id="exerciceTemplate">
            <h2></h2>
            <div class="exercice">
                <p class="exercice"></p>
                <button class="accordion" id="accordion1"></button>
                <div class="panel" id ="panelEnnonce"></div>
                <button class="accordion" id="accordion2"></button>
                <div class="panel" id="panelCorrec"></div>
            </div>
        </template>
    </article>
</div>


<script>
    let modal = document.getElementById('js-modal')
    let form = document.querySelector('#login-form')
    const nav = document.querySelector('nav')


    function checkLogin(username, password) {
        fetch('user.json')
            .then(r => r.json())
            .then(data => {
                console.log(data);
                const utilisateur = data.utilisateurs.find(user => user.username === username);
                console.log(utilisateur);
                console.log(username, password);
                if(utilisateur) {
                    modal.style.display = 'none'
                    modal.style.opacity = '0'
                    nav.style.opacity = '1'
                    nav.style.transform = 'translateX(0)';

                } else {
                    document.getElementById("error-message").textContent = "Nom d'utilisateur ou mot de passe incorrect.";

                }
            })
    }



    document.getElementById("login-form").addEventListener("submit", function(event) {
        event.preventDefault();
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;
        checkLogin(username, password);

    });
</script>
</body>
</html>
